{% comment %}
============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============

Please beware that editting this file could break your site as it's referenced in your theme's main theme.liquid file!

Also, if you're testing changes, please do so on a duplicate theme to avoid downtime for your users!

Instructions:
1) create a file named 'cross-sell-custom' inside of your Snippets folder.
Once created it SHOULD say 'cross-sell-custom.liquid' IF NOT, rename it.
2) make sure the 3 lines of code below are added BEFORE the </head> element of your theme.liquid file (or main theme file)

<!-- Cross Sell custom code start. Do not change -->
{%include 'cross-sell-custom'%}
<!-- Cross Sell custom code end. Do not change -->

3) Make sure you to SAVE the changes made to your theme.liquid file
4) Have Cross Sell's Settings -> Display Settings set to "custom" theme, and activate the carousel feature if needed.
5) Save your Settings

Have problems or feedback? DON'T PANIC! Email us at support@csell.co or check out support site -> https://help.csell.co

============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============
{% endcomment %}

<style type="text/css">
  #cross-sell{float:left;clear:both;width:100%;}
  h3.crossselltitle{text-align: center;}
  .cross-sell{overflow:hidden;list-style-type:none;margin:0;padding:0;clear:both;text-align:center;}
  .cross-sell .product {margin-bottom:0px !important;}
  .cs-clearfix:after {content: "."; visibility: hidden; display: block; height: 0; clear: both;}
</style>
<script>
  window.xsellCustom = window.xsellCustom || {};
  window.xsellCustom.theme_settings = window.xsellCustom.theme_settings || {};
  window.xsellCustom.buildxsellsoutput = function(xsellitems, numproducts){
   	var xsmustbeavailable = xsellSettings.xsmustbeavailable;
   	var xshideifincart = xsellSettings.xshideifincart;
   	var xsdisplaycompareatprice = xsellSettings.xsdisplaycompareatprice;
   	var xsdisplaysalebadge = xsellSettings.xsdisplaysalebadge;
   	var xsdisplaypricevarieslabel = xsellSettings.xsdisplaypricevarieslabel;
   	var xsdisplayvendor = xsellSettings.xsdisplayvendor;
    var xsimagesize = 'large';
    var xsvendoroutput = '';
		var xspricevarieslabel = '';
    var xscompareatprice = '';
    var xscompareatpricestring = '';
  	var xssalepricestring = '';
  	var xspriceoutput = '';
    var xssalebadge = '<span class="badge badge--sale"><span class="badge__text">SALE</span></span>';
  	var xssalebadgeoutput = '';
    var saleclass = ' xs-sale';
    var fromlabel = '<em>from</em>';
    var xsprice = '';
  	for(var x=0; x < numproducts; x++) {
     	var xsproductdata = xsellitems[x];
      if(xsproductdata.images.length > 1) {
         var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
         var csimagetwo = xsellLib.productimageurls(xsproductdata.images[1]);
      }
      else if(xsproductdata.images.length == 1) {
         var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
         var csimagetwo = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
      }
      else
      {
         var csimage = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
         var csimagetwo = csimage;
      }
      if(xsdisplayvendor){
          xsvendoroutput = '<div class="xs-vendor-name"><a href="' + xsproductdata.url +'">' + xsproductdata.vendor + '</a></div>';
      }
     xsprice = xsellLib.xsformatMoney(xsproductdata.price, '{{ shop.money_format }}');
     if(xsdisplaypricevarieslabel) {
       if(xsproductdata.price_varies) {
         xspricevarieslabel = 'From: ';
       }
       else	{
         xspricevarieslabel = '';
       }
     }
     xspriceoutput = '<div class="money"><a href="' + xsproductdata.url +'">' + xspricevarieslabel + xsprice + '</a></div>';
     if(xsdisplaycompareatprice) {
       if(!xsproductdata.price_varies && (xsproductdata.compare_at_price > xsproductdata.price)) {
         xscompareatprice = xsellLib.xsformatMoney(xsproductdata.compare_at_price, '{{ shop.money_format }}');
         xscompareatpricestring = '<span class="xs-compare-at-price">' + xscompareatprice + '</span>';
         xssalepricestring = '<span class="xs-sale-price"><a href="' + xsproductdata.url +'">' + xsprice + '</a></span>';
         xspriceoutput = '<div class="money' + saleclass + '">' + xscompareatpricestring + ' ' + xspricevarieslabel + xssalepricestring + '</div>';
       }
     }
     if(xsdisplaysalebadge) {
       if(xsproductdata.compare_at_price > xsproductdata.price) {
         xssalebadgeoutput = xssalebadge;
       }
       else {
       xssalebadgeoutput = '';
       }
     }
     xsellLib.xselloutput += '<div class="o-layout__item u-1/3@tab u-1/4@desk" data-xsorder="' + xsproductdata["order"] + '">'
           + '<a class="product-link{% if page == 'home' %} home-products__link{% endif %}" href="' + xsproductdata.url +'">'
           + '<div class="product product--{{ settings.product_grid_align }}{% if page == 'home' %} home-products__item{% endif %}">'
           + '<div class="product__media u-bg-{{ settings.product_grid_bg }}">'
           + '<div class="product__img-wrapper">'
           + '<img src="'+ csimage +'" class="product__img lazyload"></div></div></div>'
           + '<div class="product__details">'
           + '<h3 class="product__title h4">' + xsproductdata.title + '</h3>'
           + '<p class="product__price h5">'
           + xspriceoutput
           + '</p></div></a></div>';
           //+ xssalebadgeoutput
           //+ '<img class="hover-img" height="263" width="263" src="' + csimage + '" />'
           //+ '</a></div>'
           //+ '<h3 class="product-title">'
           //+ '<a href="' + xsproductdata.url + '">' + xsproductdata.title + '</a>'
           //+ '</h3>'
		      //+ xsvendoroutput
         //+
 		}

    if(xsellLib.xselloutput != ''){
      var xsellDiv = document.createElement('div');
      xsellDiv.innerHTML = '<section class="section section--related-products"><div class="container container--medium"><div class="section__title section__title--center"><h2 class="section__title-text">' + xsellLib.settings.xstitle + '</h2></div></div><div class="container container--mob-0">'+
                  '<div class="related-products js-related-products" data-section-id="{{ section.id }}"><div class="cross-sell o-layout layout-slider js-layout-slider js-layout-slider-{{ section.id }}{% if settings.product_grid_masonry %} o-layout--masonry{% endif %}{% if section.settings.related_grid_num == 4 %} o-layout--small{% endif %}">'
                  + xsellLib.xselloutput +'</div></div></div></section>'; //output here
      document.getElementById('cross-sell').appendChild(xsellDiv);
    }
  }
</script>
