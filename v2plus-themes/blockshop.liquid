{% comment %}
============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============

Please beware that editting this file could break your site as it's referenced in your theme's main theme.liquid file!

Also, if you're testing changes, please do so on a duplicate theme to avoid downtime for your users!

Instructions:
1) create this file in the Snippets folder of your theme under the name 'cross-sell-custom'.
Once created it SHOULD say 'cross-sell-custom.liquid' IF NOT, rename it.
2) make sure this line of code below is BEFORE the </head> of the theme.liquid file (or main theme file)

{%include 'cross-sell-custom'%}

3) Make sure you to SAVE the changes made to your theme.liquid file
4) Have Cross Sell's Settings set to "custom" theme, and activate the carousel feature if needed.

Have problems or feedback? DON'T PANIC! Email us at support@csell.co or check out support site -> https://help.csell.co

============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============
{% endcomment %}

<style type="text/css">
.cstitle {text-align: center;text-transform: uppercase;}
#cross-sell .image-wrapper:hover {opacity: 0.5;}
</style>

<script>
  window.xsellCustom = window.xsellCustom || {};
  window.xsellCustom.theme_settings = window.xsellCustom.theme_settings || {};
  window.xsellCustom.buildxsellsoutput = function(xsellitems, numproducts){
    var xsmustbeavailable = xsellSettings.xsmustbeavailable;
  	var xshideifincart = xsellSettings.xshideifincart;
  	var xsdisplaycompareatprice = xsellSettings.xsdisplaycompareatprice;
  	var xsdisplaysalebadge = xsellSettings.xsdisplaysalebadge;
  	var xsdisplaypricevarieslabel = xsellSettings.xsdisplaypricevarieslabel;
  	var xsdisplayvendor = xsellSettings.xsdisplayvendor;
    var xsimagesize = 'large';
    var xsvendoroutput = '';
    var xspricevarieslabel = '';
    var xscompareatprice = '';
    var xscompareatpricestring = '';
  	var xssalepricestring = '';
  	var xspriceoutput = '';
    var xssalebadge = '<span class="badge badge--sale"><span class="badge__text">SALE</span></span>';
  	var xssalebadgeoutput = '';
    var saleclass = ' xs-sale';
    var fromlabel = '<em>from</em>';
    var xsprice = '';
  	for(var x=0; x < numproducts; x++) {
    	var xsproductdata = xsellitems[x];
      if(xsproductdata.images.length > 1) {
        var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
        var csimagetwo = xsellLib.productimageurls(xsproductdata.images[1]);
      }
      else if(xsproductdata.images.length == 1) {
        var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
        var csimagetwo = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
      }
      else {
        var csimage = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
        var csimagetwo = csimage;
      }
      if(xsdisplayvendor) {
         xsvendoroutput = '<p class="vendor">' + xsproductdata.vendor + '</p>';
      }
      xsprice = xsellLib.xsformatMoney(xsproductdata.price, '{{ shop.money_format }}');
      if(xsdisplaypricevarieslabel) {
        if(xsproductdata.price_varies) {
          xspricevarieslabel = 'From: ';
        }
        else {
          xspricevarieslabel = '';
      	}
      }

      xspriceoutput = '<p class="price">' + xspricevarieslabel + '<span class="money">'+xsprice+'</span>' + '</p>';
      if(xsdisplaycompareatprice) {
        if(!xsproductdata.price_varies && (xsproductdata.compare_at_price > xsproductdata.price)) {
            xscompareatprice = xsellLib.xsformatMoney(xsproductdata.compare_at_price, '{{ shop.money_format }}');
            xscompareatpricestring = '<em class="marked-down-from">' + '<span class="money">'+xscompareatprice + '</span></em>';
            xssalepricestring = '<span class="money">' + xsprice + '</span>';
            xspriceoutput = '<div class="price">' + xscompareatpricestring + ' ' + xspricevarieslabel + xssalepricestring + '</p>';
        }
      }
      if(xsdisplaysalebadge) {
        if(xsproductdata.compare_at_price > xsproductdata.price) {
          xssalebadgeoutput = xssalebadge;
        }
				else {
          xssalebadgeoutput = '';
        }
      }

      xsellLib.xselloutput += '<div class="product-item columns large-3" data-xsorder="' + xsproductdata["order"] + '">'
                    + '<div class="image-wrapper">'
                    + '<a href="' + xsproductdata.url +'">'
                    + '<img src="' + csimage + '" alt="' + xsproductdata.title + '" />'
                    + '</a>'
                    + '</div>'
                    + '<div class="caption">'
                    + '<p class="title">'
                    + '<a href="' + xsproductdata.url + '">' + xsproductdata.title + '</a>'
                    + '</p>'
                    + xspriceoutput
                    + '</div>'
                    + '</div>';
  }
  if(xsellLib.xselloutput != ''){
        var xsellDiv = document.createElement('div');
        xsellDiv.innerHTML = '<section class="similar-products row"><h2 class="title">' + xsellLib.settings.xstitle + '</h2><div class="product-grid cross-sell"><div class="clearfix"></div>' + xsellLib.xselloutput + '</div></section>'; //output here
        document.getElementById('cross-sell').appendChild(xsellDiv);
  }
}
</script>
