{% comment %}
============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============

Please beware that editting this file could break your site as it's referenced in your theme's main theme.liquid file!

Also, if you're testing changes, please do so on a duplicate theme to avoid downtime for your users!

Instructions:
1) create a file named 'cross-sell-custom' inside of your Snippets folder.
Once created it SHOULD say 'cross-sell-custom.liquid' IF NOT, rename it.
2) make sure the 3 lines of code below are added BEFORE the </head> element of your theme.liquid file (or main theme file)

<!-- Cross Sell custom code start. Do not change -->
{%include 'cross-sell-custom'%}
<!-- Cross Sell custom code end. Do not change -->

3) Make sure you to SAVE the changes made to your theme.liquid file
4) Have Cross Sell's Settings -> Display Settings set to "custom" theme, and activate the carousel feature if needed.
5) Save your Settings

Have problems or feedback? DON'T PANIC! Email us at support@csell.co or check out support site -> https://help.csell.co

============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============
{% endcomment %}

<style type="text/css">
#cross-sell li {list-style-type: none;}
</style>
<script>
  window.xsellCustom = window.xsellCustom || {};
  window.xsellCustom.theme_settings = window.xsellCustom.theme_settings || {};
  window.xsellCustom.buildxsellsoutput = function(xsellitems, numproducts){
    // settings from GUI
   	var xsmustbeavailable = xsellSettings.xsmustbeavailable;
   	var xshideifincart = xsellSettings.xshideifincart;
   	var xsdisplaycompareatprice = xsellSettings.xsdisplaycompareatprice;
   	var xsdisplaysalebadge = xsellSettings.xsdisplaysalebadge;
   	var xsdisplaypricevarieslabel = xsellSettings.xsdisplaypricevarieslabel;
   	var xsdisplayvendor = xsellSettings.xsdisplayvendor;
     // START HERE
     var xsimagesize = 'large';
     var xsvendoroutput = '';
     var xspricevarieslabel = '';
     var xscompareatprice = '';
     var xscompareatpricestring = '';
   	var xssalepricestring = '';
   	var xspriceoutput = '';
     var xssalebadge = '<div class="sale-badge">{{ 'products.general.sale' | t }}</div>';
   	var xssalebadgeoutput = '';
     var saleclass = ' xs-sale';
     var fromlabel = '<em>from</em>';
     var xsprice = '';
     ///display classes
     var alphaomega = '';
     var evenodd = '';
     var classcounter = 0;
     var displaycounter = 0;
   	for(var x=0; x < numproducts; x++)
 				{
           evenodd = (displaycounter % 2 == 0)? ' even' : ' odd';
           classcounter = displaycounter + 1;
           if(classcounter == 1)
           {
             alphaomega = ' alpha ';
           }
           else
           {
             if(classcounter % 4 == 0)
             {
               alphaomega = ' omega ';
             }
             else if(displaycounter % 4 == 0)
             {
               alphaomega = ' alpha ';
             }
             else
             {
               alphaomega = ' ';
             }
           }
                   	var xsproductdata = xsellitems[x];

                   	//Show Images
                     if(xsproductdata.images.length > 1)
                     {
                       var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
                       var csimagetwo = xsellLib.productimageurls(xsproductdata.images[1]);
                     }
                     else if(xsproductdata.images.length == 1)
                     {
                       var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
                       var csimagetwo = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
                     }
                     else
                     {
                       var csimage = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
                       var csimagetwo = csimage;
                     }

                   	//Display Vendor
                      if(xsdisplayvendor)
                      {
                        xsvendoroutput = '<div class="xs-vendor-name"><a href="' + xsproductdata.url +'">' + xsproductdata.vendor + '</a></div>';
                      }



                     //Build Price Output
                     xsprice = xsellLib.xsformatMoney(xsproductdata.price, '{{ shop.money_format }}');


 					//Show price varies label?
                     if(xsdisplaypricevarieslabel)
                     {
                     	if(xsproductdata.price_varies)
                       	{
                           xspricevarieslabel = '<small>{{ 'products.general.from' | t }}</small> ';
                       	}
                       	else
                       	{
                         	xspricevarieslabel = '';
                       	}
                     }

                     xspriceoutput = '<span class="money-styling custom-font">' + xspricevarieslabel + xsprice + '</span>';

                     if(xsdisplaycompareatprice)
                     {
   	                  if(!xsproductdata.price_varies && (xsproductdata.compare_at_price > xsproductdata.price))
         	            {
             	            xscompareatprice = xsellLib.xsformatMoney(xsproductdata.compare_at_price, '{{ shop.money_format }}');
                           xscompareatpricestring = '<h5 class="custom-font compare-at-price">' + xscompareatprice + '</h5>';
                           xspriceoutput = '<span class="money-styling custom-font">' + xscompareatpricestring + ' ' + xsprice + '</span>';
                       }
                     }

                     //Show Sale Badge Output
                     if(xsdisplaysalebadge)
                     {
                       if(xsproductdata.compare_at_price > xsproductdata.price)
                       {
                         xssalebadgeoutput = xssalebadge;
                       }
 					  else
                       {
                         xssalebadgeoutput = '';
                       }
                     }

                     xsellLib.xselloutput += '<li class="col-md-3 col-sm-3 col-xs-12' + alphaomega + '" data-xsorder="' + xsproductdata["order"] + '">'
                                   + '<div class="indiv-product">'
                                   + '<div class="collection-image--zoom-effect">'
                                   + '<div class="zoom-effect--inner">'
                                   + '<a href="' + xsproductdata.url +'" title="' + xsproductdata.title + '">'
                                   + '<img src="' + csimage + '" alt="' + xsproductdata.title + '" class="img-responsive" id="collection-image-anim">'
                                   + '</a>'
                                   + '</div>'
                                   + '</div>'
                                   + '<div class="hp-title">'
                                   + '<a href="' + xsproductdata.url +'">'
                                   + '<div class="indiv-product-title-text">' + xsproductdata.title + '</div>'
                                   + xssalebadgeoutput
                                   + xspriceoutput
                                   + '</a>'
                                   + '</div>'
                                   + '<span class="shopify-xsproductdata-reviews-badge" data-id="' + xsproductdata.id + '"></span>'
                                   + '</div>'
                                   + '</li>';

                                   displaycounter++;
 		}

    if(xsellLib.xselloutput != ''){
      var xsellDiv = document.createElement('div');
      xsellDiv.innerHTML = '<h3 class="crossselltitle">' + xsellLib.settings.xstitle + '</h3><ul class="cross-sell">' + xsellLib.xselloutput + '</ul>'; //output here
      document.getElementById('cross-sell').appendChild(xsellDiv);
    }
  }
</script>
