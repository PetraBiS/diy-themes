{% comment %}
============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============

Please beware that editting this file could break your site as it's referenced in your theme's main theme.liquid file!

Also, if you're testing changes, please do so on a duplicate theme to avoid downtime for your users!

Instructions:
1) create a file named 'cross-sell-custom' inside of your Snippets folder.
Once created it SHOULD say 'cross-sell-custom.liquid' IF NOT, rename it.
2) make sure the line of code below is added BEFORE the </head> element of your theme.liquid file (or main theme file)

{%include 'cross-sell-custom'%}

3) Make sure you to SAVE the changes made to your theme.liquid file
4) Have Cross Sell's Settings -> Display Settings set to "custom" theme, and activate the carousel feature if needed.
5) Save your Settings

Have problems or feedback? DON'T PANIC! Email us at support@csell.co or check out support site -> https://help.csell.co

============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============
{% endcomment %}

<style type="text/css">
/.cross-sell .thumbnail img {opacity: 1;}
.cross-sell .thumbnail:hover {opacity: 0.8;}
.cross-sell {text-align: center;}
/*.cross-sell .thumbnail {float: none;display: inline-block;vertical-align: text-top;}*/
.cross-sell .thumbnail .cs-sale {color:#ff5a5f;}
.cross-sell .sale_banner a {color:#fff;padding-bottom: 0;}
</style>
<script>
  window.xsellCustom = window.xsellCustom || {};
  window.xsellCustom.theme_settings = window.xsellCustom.theme_settings || {};
  window.xsellCustom.buildxsellsoutput = function(xsellitems, numproducts){
   	var xsmustbeavailable = xsellSettings.xsmustbeavailable;
   	var xshideifincart = xsellSettings.xshideifincart;
   	var xsdisplaycompareatprice = xsellSettings.xsdisplaycompareatprice;
   	var xsdisplaysalebadge = xsellSettings.xsdisplaysalebadge;
   	var xsdisplaypricevarieslabel = xsellSettings.xsdisplaypricevarieslabel;
   	var xsdisplayvendor = xsellSettings.xsdisplayvendor;
    var xsimagesize = 'large';
    var xsvendoroutput = '';
    var xspricevarieslabel = '';
    var xscompareatprice = '';
    var xscompareatpricestring = '';
  	var xssalepricestring = '';
  	var xspriceoutput = '';
    var xssalebadge = '<div class="sale_banner">Sale</div>';
  	var xssalebadgeoutput = '';
    var saleclass = ' xs-sale';
    var fromlabel = '<em>from</em>';
    var xsprice = '';
    var alphaomega = '';
    var evenodd = '';
    var classcounter = 0;
    var displaycounter = 0;
    for(var x=0; x < numproducts; x++) {
      evenodd = (displaycounter % 2 == 0)? ' even' : ' odd';
      classcounter = displaycounter + 1;
      if(classcounter == 1) {
        alphaomega = ' alpha ';
      }
      else if(classcounter % 3 == 0) {
          alphaomega = ' omega ';
      }
      else {
        alphaomega = ' ';
      }
    	var xsproductdata = xsellitems[x];
      if(xsproductdata.images.length > 1) {
        var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
        var csimagetwo = xsellLib.productimageurls(xsproductdata.images[1]);
      }
      else if(xsproductdata.images.length == 1) {
        var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
        var csimagetwo = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
      }
      else {
        var csimage = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
        var csimagetwo = csimage;
      }
      if(xsdisplayvendor) {
        xsvendoroutput = '<div class="xs-vendor-name"><a href="' + xsproductdata.url +'">' + xsproductdata.vendor + '</a></div>';
      }
        xsprice = xsellLib.xsformatMoney(xsproductdata.price, '{{ shop.money_format }}');
      if(xsdisplaypricevarieslabel) {
       	if(xsproductdata.price_varies) {
            xspricevarieslabel = '<small><em>{{ 'products.general.from' | t }}</em></small> ';
         	}
         	else {
           	xspricevarieslabel = '';
         	}
       }

     xspriceoutput = '<span class="price" itemprop="price">' + xspricevarieslabel + xsprice + '</span>';

     if(xsdisplaycompareatprice) {
        if(xsproductdata.compare_at_price > xsproductdata.price) {
          xscompareatprice = xsellLib.xsformatMoney(xsproductdata.compare_at_price_max, '{{ shop.money_format }}');
          xscompareatpricestring = ' <span class="was_price">' + xscompareatprice + '</span>';
          xspriceoutput = '<span class="price .cs-sale" itemprop="price">' + xspricevarieslabel + '<span style="color:#FF3C4F">'+xsprice+'</span>' + xscompareatpricestring + '</span>';
        }
     }
     if(xsdisplaysalebadge) {
       if(xsproductdata.compare_at_price_max > xsproductdata.price) {
         xssalebadgeoutput = xssalebadge;
         saleclass = 'sale ';
       }
       else {
         saleclass = '';
         xssalebadgeoutput = '';
       }
     }
     xsellLib.xselloutput += '<div class="one-third column' + alphaomega + 'thumbnail' + evenodd + '" data-xsorder="' + xsproductdata["order"] + '">'
                          + '<a href="' + xsproductdata.url + '" title="' + xsproductdata.title + '" itemprop="url">'
                          + '<div class="relative product_image">'
     				              +'<div class="product_container swap-true">'
                   		    + '<div class="image__container">'
                          + '<img class="lazyload lazyload--fade-in" src="' + csimage + '" alt="' + xsproductdata.title + '"/>'
                   		    + '<div class="image__container">'
              		     	  + '<img src="'+csimagetwo+'" class="secondary lazyload" />'
              			      + '</div>'
              			      + '</div>'
                          + '</div></div>'
                          + '<div class="info">'
     				              + xssalebadgeoutput
                          + '<span class="title" itemprop="name">' + xsproductdata.title + '</span>'
                          + '<span class="shopify-product-reviews-badge" data-id="' + xsproductdata.id + '"></span>'
                          + '<br /><span class="price ">'
                          + xspriceoutput
                          + '</span>'
                          + '</div>'
                          // + xssalebadgeoutput
                          + '</a>'
                          + '</div>';
                          displaycounter++;
 	}
  if(xsellLib.xselloutput != ''){
    var xsellDiv = document.createElement('div');
    xsellDiv.innerHTML = '<br class="clear" /><br class="clear" /><h4 class="title center">' + xsellLib.settings.xstitle + '</h4><div class="feature_divider"></div><div class="sixteen columns"><div class="products cross-sell" itemtype="http://schema.org/ItemList">' + xsellLib.xselloutput + '</div></div>'; //output here
    document.getElementById('cross-sell').appendChild(xsellDiv);
  }
}
</script>
