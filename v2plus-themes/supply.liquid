{% comment %}
============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============

Please beware that editting this file could break your site as it's referenced in your theme's main theme.liquid file!

Also, if you're testing changes, please do so on a duplicate theme to avoid downtime for your users!

Instructions:
1) create a file named 'cross-sell-custom' inside of your Snippets folder.
Once created it SHOULD say 'cross-sell-custom.liquid' IF NOT, rename it.
2) make sure the 3 lines of code below are added BEFORE the </head> element of your theme.liquid file (or main theme file)

<!-- Cross Sell custom code start. Do not change -->
{%include 'cross-sell-custom'%}
<!-- Cross Sell custom code end. Do not change -->

3) Make sure you to SAVE the changes made to your theme.liquid file
4) Have Cross Sell's Settings -> Display Settings set to "custom" theme, and activate the carousel feature if needed.
5) Save your Settings

Have problems or feedback? DON'T PANIC! Email us at support@csell.co or check out support site -> https://help.csell.co

============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============
{% endcomment %}

<style type="text/css">
#cross-sell .grid-item {float: none;display: inline-block;vertical-align: text-top;text-align: center;}
</style>
<script>
  window.xsellCustom = window.xsellCustom || {};
  window.xsellCustom.theme_settings = window.xsellCustom.theme_settings || {};
  window.xsellCustom.buildxsellsoutput = function(xsellitems, numproducts){
    var xsmustbeavailable = xsellSettings.xsmustbeavailable;
    var xshideifincart = xsellSettings.xshideifincart;
    var xsdisplaycompareatprice = xsellSettings.xsdisplaycompareatprice;
    var xsdisplaysalebadge = xsellSettings.xsdisplaysalebadge;
    var xsdisplaypricevarieslabel = xsellSettings.xsdisplaypricevarieslabel;
    var xsdisplayvendor = xsellSettings.xsdisplayvendor;
    var xsimagesize = 'large';
    var xsvendoroutput = '';
    var xspricevarieslabel = '';
    var xscompareatprice = '';
    var xsdisplaysavingstag = true;
    var xscompareatpricestring = '';
  	var xssalepricestring = '';
  	var xspriceoutput = '';
    var xssalebadge = '<span class="badge badge--sale"><span class="badge__text">SALE</span></span>';
  	var xssalebadgeoutput = '';
    var saleclass = ' xs-sale';
    var fromlabel = '<em>from</em>';
    var xsprice = '';
  	for(var x=0; x < numproducts; x++) {
  	var xsproductdata = xsellitems[x];
    if(xsproductdata.images.length > 1) {
      var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
      var csimagetwo = xsellLib.productimageurls(xsproductdata.images[1]);
    }
    else if(xsproductdata.images.length == 1) {
      var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
      var csimagetwo = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
    }
    else {
      var csimage = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
      var csimagetwo = csimage;
    }
    if(xsdisplayvendor) {
       xsvendoroutput = '<div class="xs-vendor-name"><a href="' + xsproductdata.url +'">' + xsproductdata.vendor + '</a></div>';
     }
    xsprice = xsellLib.xsformatMoney(xsproductdata.price, '{{ shop.money_format }}');
    if(xsdisplaypricevarieslabel) {
    	if(xsproductdata.price_varies) {
          xspricevarieslabel = 'From: ';
      }
      else {
        	xspricevarieslabel = '';
      }
    }
    xspriceoutput = '<span class="h1 medium--left"><small>' + xsprice + '</small></span>';
    if(xsdisplaycompareatprice) {
      if(xsproductdata.compare_at_price > xsproductdata.price) {
          xscompareatprice = xsellLib.xsformatMoney(xsproductdata.compare_at_price, '{{ shop.money_format }}');
          xscompareatpricestring = '<br /><small><s><small aria-hidden="true">' + xscompareatprice + '</small><span class="visually-hidden">' + xscompareatprice + '</span></s></small>';
          xssalepricestring = '';
          xspriceoutput = '<span class="h1 medium--left"><small>' + xsprice + '</small>' + xscompareatpricestring + '</span>';
      }
    }
    if(xsdisplaysavingstag) {
      if(xsproductdata.compare_at_price > xsproductdata.price) {
        savePrice = xsellLib.xsformatMoney((xsproductdata.compare_at_price - xsproductdata.price), '{{ shop.money_format }}');
        savePriceStr = '<span class="sale-tag">Save <span class="money">' + savePrice + '</span></span>';
      }
      else {
        savePriceStr = '';
      }
    }
    if(xsdisplaysalebadge) {
      if(xsproductdata.compare_at_price > xsproductdata.price) {
        xssalebadgeoutput = xssalebadge;
      }
      else {
       xssalebadgeoutput = '';
      }
    }
    xsellLib.xselloutput += '<div class="grid-item large--one-quarter medium--one-third small--one-half" data-xsorder="' + xsproductdata["order"] + '">'
                         + '<a class="product-grid-item" href="' + xsproductdata.url +'">'
                         + '<div class="product-grid-image">'
                         + '<div class="product-grid-image--centered">'
                         + '<img alt="' + xsproductdata.title + '" src="' + csimage + '" />'
                         + '</div>'
                         + '</div>'
                         + '<p>' + xsproductdata.title + '</p>'
                         + '<div class="product-item--price">'
                         + xspriceoutput
                         + savePriceStr
                         + '</div>'
                         + '</a>'
                         + '</div>';
 		}

    if(xsellLib.xselloutput != ''){
      var xsellDiv = document.createElement('div');
      xsellDiv.innerHTML = '<span class="h1">' + xsellLib.settings.xstitle + '</span><div class="grid-uniform cross-sell">' + xsellLib.xselloutput + '</div>'; //output here
      document.getElementById('cross-sell').appendChild(xsellDiv);
    }
  }
</script>
