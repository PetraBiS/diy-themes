{% comment %}
============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============

Please beware that editting this file could break your site as it's referenced in your theme's main theme.liquid file!

Also, if you're testing changes, please do so on a duplicate theme to avoid downtime for your users!

Instructions:
1) create a file named 'cross-sell-custom' inside of your Snippets folder.
Once created it SHOULD say 'cross-sell-custom.liquid' IF NOT, rename it.
2) make sure the line of code below is added BEFORE the </head> element of your theme.liquid file (or main theme file)

{%include 'cross-sell-custom'%}

3) Make sure you to SAVE the changes made to your theme.liquid file
4) Have Cross Sell's Settings -> Display Settings set to "custom" theme, and activate the carousel feature if needed.
5) Save your Settings

NOTES REGARDING THEME:
- if two images are used for hover and they are NOT the same ratio, a possible hover bug will occur. To avoid this,
use same ratio images OR deactivate secondary image
- make sure to check the theme's scss to verify grid layouts BEFORE applyihng change to xselloutput

Have problems or feedback? DON'T PANIC! Email us at support@csell.co or check out support site -> https://help.csell.co

============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============
{% endcomment %}

<style>
  .cross-sell .xs-sales-badge{color:#ba2323; border-style:solid; border-width:1px;}
</style>
<script>
  window.xsellCustom = window.xsellCustom || {};
  window.xsellCustom.theme_settings = window.xsellCustom.theme_settings || {};
  window.xsellCustom.buildxsellsoutput = function(xsellitems, numproducts){
    var xsmustbeavailable = xsellSettings.xsmustbeavailable;
    var xshideifincart = xsellSettings.xshideifincart;
    var xsdisplaycompareatprice = xsellSettings.xsdisplaycompareatprice;
    var xsdisplaysalebadge = xsellSettings.xsdisplaysalebadge;
    var xsdisplaypricevarieslabel = xsellSettings.xsdisplaypricevarieslabel;
    var xsdisplayvendor = xsellSettings.xsdisplayvendor;
    var xsimagesize = 'large';
    var xsvendoroutput = '';
    var xspricevarieslabel = '';
    var xscompareatprice = '';
    var xscompareatpricestring = '';
    var xssalepricestring = '';
    var xspriceoutput = '';
    var xssalebadge = '<div class="xs-sales-badge">&nbspSALE&nbsp</div>';
    var xssalebadgeoutput = '';
    var saleclass = ' xs-sale';
    var fromlabel = '<em>from</em>';
    var xsprice = '';

    // add custom variables here
    for(var x=0; x < numproducts; x++) {
      var xsproductdata = xsellitems[x];
      var alphaomega = '';
      var evenodd = '';
      if(x%2 ==0){
        evenodd = ' even';
      }
      else{
        evenodd = ' odd';
      }
      if(x==0) {
        alphaomega = ' alpha ';
      }
      else if(x == (numproducts-1)) {
        alphaomega = ' omega new_row ';
      }
      else {
        alphaomega = ' ';
      }
      if(xsproductdata.images.length > 1) {
        var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
        var csimagetwo = xsellLib.productimageurls(xsproductdata.images[1]);
      }
      else if(xsproductdata.images.length == 1) {
        var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
        var csimagetwo = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
      }
      else {
        var csimage = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
        var csimagetwo = csimage;
      }
      if(xsdisplayvendor) {
        xsvendoroutput = '<div class="xs-vendor-name"><a href="' + xsproductdata.url +'">' + xsproductdata.vendor + '</a></div>';
      }

      xsprice = xsellLib.xsformatMoney(xsproductdata.price, '{{ shop.money_format }}');
      if(xsdisplaypricevarieslabel) {
        if(xsproductdata.price_varies) {
            xspricevarieslabel = 'From: ';
          }
          else {
            xspricevarieslabel = '';
          }
      }
      xspriceoutput = '<div class="price"><span class="money">' + xspricevarieslabel + xsprice + '</span></div>';
      if(xsdisplaycompareatprice) {

        if(!xsproductdata.price_varies && (xsproductdata.compare_at_price > xsproductdata.price)) {
            xscompareatprice = xsellLib.xsformatMoney(xsproductdata.compare_at_price, '{{ shop.money_format }}');
            xscompareatpricestring = '<span class="money"><span class="was_price">' + xscompareatprice + '</span></span>';            
            xssalepricestring = '<span class="money">' + xspricevarieslabel +xsprice + '</span>';
            xspriceoutput = '<div class="price sale">' + xscompareatpricestring + ' ' + xspricevarieslabel + xssalepricestring + '</div>';
        }
      }
      if(xsdisplaysalebadge) {
        if(xsproductdata.compare_at_price > xsproductdata.price) {
          xssalebadgeoutput = xssalebadge;
        }
        else {
          xssalebadgeoutput = '';
        }
      }

      xsellLib.xselloutput += '<div class="small-down--one-half medium-down--one-half four columns '+alphaomega+'thumbnail'+ evenodd+'" data-xsorder="' + xsproductdata["order"] + '">'
                           + '<div class="product-wrap">'
                           + '<div class="relative product_image swap-true">'
                           + '<a href="'+xsproductdata.url+'" itemprop="url">'
                           + '<div class="image__container">'
                           + '<img src="'+csimage+'" class="appear lazyautosizes lazyloaded" data-sizes="auto" data-src="'+csimage+'" />'
                           + '</div>'
                           + '<div class="image__container">'
                           + '<img src="'+csimagetwo+'"class="secondary lazyloaded" data-src="'+csimagetwo+'" />'
                           + '</div>'
                           + '</a>'
                           + '<div class="banner_holder">'
                           + xssalebadgeoutput
                           + '</div>'
                           + '</div>'
                   + '<a class="product-info__caption " href="'+xsproductdata.url+'" itemprop="url">'
                           + '<div class="product-details">'
                           + '<span itemprop="title" class="title">'+xsproductdata.title+'</span>'
                           + '<span itemprop="brand" class="brand">'+xsproductdata.vendor+'</span>'
                   + xspriceoutput
               + '</div></a>'
                           + '</div>'
                           + '</div>';
    }

    if(xsellLib.xselloutput != ''){
      var xsellDiv = document.createElement('div');
      xsellDiv.innerHTML = '<div class="container"><div class="related-products__title"><h4 class="title center">' + xsellLib.settings.xstitle + '</h4></div></div><div class="container related-products--grid"><div itemtype="http://schema.org/ItemList" class="product-list clearfix cross-sell">' + xsellLib.xselloutput + '</div></div>'; //output here
      document.getElementById('cross-sell').appendChild(xsellDiv);
    }
  }
</script>
{% comment %}
============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============

Please beware that editting this file could break your site as it's referenced in your theme's main theme.liquid file!

Also, if you're testing changes, please do so on a duplicate theme to avoid downtime for your users!

Instructions:
1) create a file named 'cross-sell-custom' inside of your Snippets folder.
Once created it SHOULD say 'cross-sell-custom.liquid' IF NOT, rename it.
2) make sure the line of code below is added BEFORE the </head> element of your theme.liquid file (or main theme file)

{%include 'cross-sell-custom'%}

3) Make sure you to SAVE the changes made to your theme.liquid file
4) Have Cross Sell's Settings -> Display Settings set to "custom" theme, and activate the carousel feature if needed.
5) Save your Settings

NOTES REGARDING THEME:
- if two images are used for hover and they are NOT the same ratio, a possible hover bug will occur. To avoid this,
use same ratio images OR deactivate secondary image
- make sure to check the theme's scss to verify grid layouts BEFORE applyihng change to xselloutput

Have problems or feedback? DON'T PANIC! Email us at support@csell.co or check out support site -> https://help.csell.co

============= Warning: DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU'RE DOING! =============
{% endcomment %}

<style>
  /*
  #cross-sell  .cross-sell .xs-compare-at-price{padding-right: 5px;display: inline-block;text-decoration: line-through;}
  #cross-sell .cross-sell .flickity-prev-next-button{background:none;top:60%}
  #cross-sell .flickity-enabled{overflow:initial;}
  #cross-sell .flickity-prev-next-button .arrow{fill:black;}
  .cross-sell .flickity-prev-next-button.previous{left:-30px;}
  .cross-sell .flickity-prev-next-button.next {right: -30px;}*/
  .cross-sell .xs-sales-badge{color:#ba2323; border-style:solid; border-width:1px;}
</style>
<script>
  window.xsellCustom = window.xsellCustom || {};
  window.xsellCustom.theme_settings = window.xsellCustom.theme_settings || {};
  window.xsellCustom.buildxsellsoutput = function(xsellitems, numproducts){
    var xsmustbeavailable = xsellSettings.xsmustbeavailable;
    var xshideifincart = xsellSettings.xshideifincart;
    var xsdisplaycompareatprice = xsellSettings.xsdisplaycompareatprice;
    var xsdisplaysalebadge = xsellSettings.xsdisplaysalebadge;
    var xsdisplaypricevarieslabel = xsellSettings.xsdisplaypricevarieslabel;
    var xsdisplayvendor = xsellSettings.xsdisplayvendor;
    var xsimagesize = 'large';
    var xsvendoroutput = '';
    var xspricevarieslabel = '';
    var xscompareatprice = '';
    var xscompareatpricestring = '';
    var xssalepricestring = '';
    var xspriceoutput = '';
    var xssalebadge = '<div class="xs-sales-badge">&nbspSALE&nbsp</div>';
    var xssalebadgeoutput = '';
    var saleclass = ' xs-sale';
    var fromlabel = '<em>from</em>';
    var xsprice = '';

    // add custom variables here
    for(var x=0; x < numproducts; x++) {
      var xsproductdata = xsellitems[x];
      var alphaomega = '';
      var evenodd = '';
      if(x%2 ==0){
        evenodd = ' even';
      }
      else{
        evenodd = ' odd';
      }
      if(x==0) {
        alphaomega = ' alpha ';
      }
      else if(x == (numproducts-1)) {
        alphaomega = ' omega new_row ';
      }
      else {
        alphaomega = ' ';
      }
      if(xsproductdata.images.length > 1) {
        var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
        var csimagetwo = xsellLib.productimageurls(xsproductdata.images[1]);
      }
      else if(xsproductdata.images.length == 1) {
        var csimage = xsellLib.productimageurls(xsproductdata.images[0]);
        var csimagetwo = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
      }
      else {
        var csimage = 'https://cdn.shopify.com/s/images/admin/no-image-'+xsimagesize+'.gif';
        var csimagetwo = csimage;
      }
      if(xsdisplayvendor) {
        xsvendoroutput = '<div class="xs-vendor-name"><a href="' + xsproductdata.url +'">' + xsproductdata.vendor + '</a></div>';
      }

      xsprice = xsellLib.xsformatMoney(xsproductdata.price, '{{ shop.money_format }}');
      if(xsdisplaypricevarieslabel) {
        if(xsproductdata.price_varies) {
            xspricevarieslabel = 'From: ';
          }
          else {
            xspricevarieslabel = '';
          }
      }
      xspriceoutput = '<div class="price"><span class="money">' + xspricevarieslabel + xsprice + '</span></div>';
      if(xsdisplaycompareatprice) {

        if(!xsproductdata.price_varies && (xsproductdata.compare_at_price > xsproductdata.price)) {
            xscompareatprice = xsellLib.xsformatMoney(xsproductdata.compare_at_price, '{{ shop.money_format }}');
            xscompareatpricestring = '<span class="money"><span class="was_price">' + xscompareatprice + '</span></span>';            
            xssalepricestring = '<span class="money">' + xspricevarieslabel +xsprice + '</span>';
            xspriceoutput = '<div class="price sale">' + xscompareatpricestring + ' ' + xspricevarieslabel + xssalepricestring + '</div>';
        }
      }
      if(xsdisplaysalebadge) {
        if(xsproductdata.compare_at_price > xsproductdata.price) {
          xssalebadgeoutput = xssalebadge;
        }
        else {
          xssalebadgeoutput = '';
        }
      }

      xsellLib.xselloutput += '<div class="small-down--one-half medium-down--one-half four columns '+alphaomega+'thumbnail'+ evenodd+'" data-xsorder="' + xsproductdata["order"] + '">'
                           + '<div class="product-wrap">'
                           + '<div class="relative product_image swap-true">'
                           + '<a href="'+xsproductdata.url+'" itemprop="url">'
                           + '<div class="image__container">'
                           + '<img src="'+csimage+'" class="appear lazyautosizes lazyloaded" data-sizes="auto" data-src="'+csimage+'" />'
                           + '</div>'
                           + '<div class="image__container">'
                           + '<img src="'+csimagetwo+'"class="secondary lazyloaded" data-src="'+csimagetwo+'" />'
                           + '</div>'
                           + '</a>'
                           + '<div class="banner_holder">'
                           + xssalebadgeoutput
                           + '</div>'
                           + '</div>'
                   + '<a class="product-info__caption " href="'+xsproductdata.url+'" itemprop="url">'
                           + '<div class="product-details">'
                           + '<span itemprop="title" class="title">'+xsproductdata.title+'</span>'
                           + '<span itemprop="brand" class="brand">'+xsproductdata.vendor+'</span>'
                   + xspriceoutput
               + '</div></a>'
                           + '</div>'
                           + '</div>';
    }

    if(xsellLib.xselloutput != ''){
      var xsellDiv = document.createElement('div');
      xsellDiv.innerHTML = '<div class="container"><div class="related-products__title"><h4 class="title center">' + xsellLib.settings.xstitle + '</h4></div></div><div class="container related-products--grid"><div itemtype="http://schema.org/ItemList" class="product-list clearfix cross-sell">' + xsellLib.xselloutput + '</div></div>'; //output here
      document.getElementById('cross-sell').appendChild(xsellDiv);
    }
  }
</script>
